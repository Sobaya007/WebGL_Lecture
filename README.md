# OpenGL講習会
ようこそ！OpenGL講習会へ！
今回はJavaScriptを使ってOpenGLというライブラリについて学んでいくことにします。

## OpenGLって？
OpenGLとはOpen Graphics Libraryを意味し、その名の通り3Dのグラフィックスを扱うためのライブラリです。OpenGLはマルチプラットフォーム、つまり様々なOSや言語で似たような使い方のできるライブラリですので、今回JavaScriptで使う方法は他の言語でも生かすことができます。
昨今たくさんの3Dライブラリが世に溢れていますが、そのほとんどはDirectXというライブラリかこのOpenGLを使ってできています。つまり、OpenGLの正しい使い方を覚えれば3Dのライブラリを自作することもできるようになります。

## いろいろなOpenGL
OpenGL自体は歴史の古いライブラリで、バージョンの違いでいくつか種類があります。

- OpenGL
- OpenGLシリーズの中でオリジナルのバージョン。最新の機能は主にこれに搭載される。
- - OpenGL ES
- OpenGL for Embedded System。スマホやゲーム機などの端末に搭載するためのOpenGLのサブセット。
- - WebGL
- ブラウザで使われるOpenGL。OpenGL ESからの派生なため、こちらもOpenGLのサブセットになる。
- ![file](https://object-storage.tyo1.conoha.io/v1/nc_a389300626f9429c8b4e91e76400ea1e/crowi/attachment/590d93b231f2d0012c8915dc/f64fb64445f772fca9d5738954ff0163.png)
    Qiitaから拝借した図

    今回はJavaScriptでOpenGLを扱うため、正確にはWebGLを使います。
    PCゲームを使うときにはオリジナルのOpenGL、スマホのアプリで3Dを扱う場合にはOpenGL ES、WEBで見られるものを作るにはWebGLを使うのが一般的です。

## OpenGLの使い方概要
ではさっそく具体的なOpenGLの使い方について説明します。
Canvasなどの2Dグラフィックスを扱ったことのある人は、もしかしたらこういうコードを見たことがあるかもしれません。
```c
drawRect(x,y,w,h,color);
```
疑似コードなので具体的にどのライブラリというわけではないのですが、(x,y)の位置に(w,h)の大きさをもった矩形をcolorの色で描く、といった命令です。
OpenGLでこの命令を実現しようと思うと、途方もない面倒臭さがあります。

理由はいくつかあって、まず1つとしてあるのが**OpenGLは三角形しか描けない**という点です。OpenGLで何か図形を描きたいと思ったら、まずその図形を三角形に分割し、その頂点座標を指定しなければ描画ができないのです。

2つ目の面倒臭さは、**シェーダ**と呼ばれる概念です。OpenGLではより汎用的な描画を実現するために、図形の変形(平行移動、回転、拡大など)や自由な著色を実現するための特殊なプログラムを書く機能がついていて、これをシェーダといいます。
OpenGLの古いバージョンでは描画の汎用性が乏しい代わりに、シェーダを描かなくてもある程度の変形や著色ができるように関数が提供されていたのですが、バージョンが上がるとそれらの機能が廃止され、必ずシェーダを書かなければならない仕様に変わってしまいました。

したがって、上のdrawRectのような命令をOpenGLで行おうとすれば、以下のようにする必要があります。
1. 指定されたx,y,w,hから四角形の頂点の座標を計算する
1. 四角形は描画できないので、三角形に分割する
1. 変形を定義するシェーダを書く(この場合には変形は要らないが、それでも書かないといけない)
1. 指定されたcolorで塗りつぶすという著色方法を定義するシェーダを書く
1. 以上の設定を反映し、描画を実行する

...面倒ですね。これらの冗長な設定のうち、ある程度をデフォルトで定義してくれるのがいわゆる3Dライブラリというわけです。

まぁ今回はOpenGLの学習なので、これをとりあえずやってみましょう。
